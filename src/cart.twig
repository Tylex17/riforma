{# index.twig #}
{% extends "layouts/layout.twig" %}
{% set cart =
	[
		{
			id: 1,
			name: 'Vincent',
			model: 'угловой диван',
			size: '200х300х92см',
			matherials: 'Бежевый велюр Triniti с грязеотталкивающей технологией + Венге',
			price : '54000',
			count: '1',
			discount: '10',
			img: 'cart'

		},
		{
			id: 2,
			name: 'Vincent1',
			model: 'угловой диван',
			size: '200х300х92см',
			matherials: 'Бежевый велюр Triniti с грязеотталкивающей технологией + Венге',
			price : '60000',
			count: '1',
			discount: '25',
			img: 'cart'

		},
	]
%}

{% set accessories =
	[
		{
			id: 1,
			img: 'cart',
			name: 'Vincent1',
			text: 'Vincent1',
			price : '60000',
			labels: ['New','hit']
		},
		{
			id: 2,
			img: 'cart',
			name: 'Vincent1',
			text: 'Vincent1',
			price : '1000',
			labels: [ 'sale','hit', 'new']
		},
		{
			id: 3,
			img: 'cart',
			name: 'Vincent1',
			text: 'Vincent1',
			price : '20000',
			labels: ['sale']
		},
		{
			id: 4,
			img: 'cart',
			name: 'Vincent1',
			text: 'Vincent1',
			price : '10000',
			labels: []
		},
	]
%}

{% set shops =
	[
		{
			date: '4 октября',
			name: 'SC GAGARINSKIY',
			coords: [55.707086, 37.591793],
		},
		{
			date: '14 октября',
			name: 'AfIMALL CITY',
			coords: [55.748963, 37.539070],
		},
		{
			date: '24 октября',
			name: 'Avia Park',
			coords: [55.790488, 37.531356],
		},
	]
%}

{% block sidebar %}
	<div class="sidebar sidebar_personal sticky-sidebar-element">
		<div class="sidebar-head">
			<div class="sidebar-head__top">
				<a href="#" class="sidebar-logo">
					<svg xmlns="http://www.w3.org/2000/svg" width="35.432" height="162" viewBox="0 0 35.432 162">
						<g data-name="Group 1" fill="#613175">
							<path data-name="Path 1" d="M12.758 76.706l-2.232.779v5.9h24.465v-6.732H18.917l-3.5-9.19-5.4 2.054z"/>
							<path data-name="Path 2" class="logo-path" d="M14.093.659c-3.866 1.684-4.958 6.817-4.8 10.668l.019.313c.3 5.28 2.72 9.471 8.442 10.357v-6.3c-2.475-.4-3.665-1.855-3.831-4.364v-.065a5.125 5.125 0 0 1 1.074-3.838 3.329 3.329 0 0 1 2.6-.935h1.69c.267 1.608.5 3.223.73 4.837.1.635.188 1.271.284 1.9.394 2.584.754 5.347 2.364 7.495a5.735 5.735 0 0 0 2.119 1.714 6.507 6.507 0 0 0 2.12.586 10.4 10.4 0 0 0 1.089.065 7.338 7.338 0 0 0 3.958-1.06 6.75 6.75 0 0 0 2.543-3 11.31 11.31 0 0 0 .894-4.662 12.611 12.611 0 0 0-.358-3.035 9.46 9.46 0 0 0-2.689-4.7l2.658-.92V0H18.844a12.233 12.233 0 0 0-4.751.659zm13.67 5.832a7.682 7.682 0 0 1 3.1 4.837 6.107 6.107 0 0 1 .111 1.139 4.007 4.007 0 0 1-.872 2.718 3.076 3.076 0 0 1-2.4.98 5.032 5.032 0 0 1-.8-.074c-1.584-.3-2.24-1.642-2.54-3.1-.108-.548-.211-1.1-.3-1.661-.276-1.608-.5-3.249-.772-4.837h4.484z"/>
							<path data-name="Rectangle 2" class="logo-path" d="M10.526 135.758h24.466v6.736H10.526z"/>
							<path data-name="Path 3" class="logo-path" d="M10.425 95.412a15.157 15.157 0 0 0 0 10.511 11.072 11.072 0 0 0 2.626 3.953c4.758 4.585 14.08 4.6 18.828-.014a11.047 11.047 0 0 0 2.626-3.98 15.13 15.13 0 0 0 0-10.427 11.02 11.02 0 0 0-2.626-3.975c-4.749-4.617-14.07-4.6-18.828-.014a11 11 0 0 0-2.626 3.946zm16.265.055a5.864 5.864 0 0 1 2.716 2.009 5.822 5.822 0 0 1 0 6.381 5.862 5.862 0 0 1-2.716 2.007 12.912 12.912 0 0 1-8.492-.015 5.723 5.723 0 0 1-2.655-2.036 5.76 5.76 0 0 1 0-6.292 5.727 5.727 0 0 1 2.655-2.038 12.922 12.922 0 0 1 8.493-.016z"/>
							<path data-name="Path 4" class="logo-path" d="M3.051 125.338a7.893 7.893 0 0 0 2.285 1.315 10.464 10.464 0 0 0 3.715.623h1.507v3.722h5.33v-3.721h19.1v-6.748H15.896v-4.981h-5.337v5.169h-.007l.007.007c-.656 0-1.257 0-1.952-.007-3.324-.015-3.7-2.99-3.444-5.66H.137c-.493 3.692.314 8.12 2.914 10.281z"/>
							<path data-name="Path 5" class="logo-path" d="M9.817 35.508a10.32 10.32 0 0 0 3.364 8.3 6.7 6.7 0 0 0-3.24 4.835 10.074 10.074 0 0 0 2.97 8.548l-2.381.831v5.9h24.46v-6.731h-16.7c-1.615-1.254-3.04-2.951-2.982-5.039a3.008 3.008 0 0 1 2.076-2.91 7.788 7.788 0 0 1 2.838-.392h14.772v-6.733H17.659l-.4-.339a5.354 5.354 0 0 1-1.923-3.434 3.332 3.332 0 0 1 1.04-2.855 4.071 4.071 0 0 1 2.8-.913h15.816v-6.83H18.538c-4.759-.002-8.459 2.671-8.721 7.762z"/>
							<path data-name="Path 6" d="M12.758 155.318l-2.232.778v5.9h24.465v-6.731H18.917l-3.5-9.19-5.4 2.054z"/>
						</g>
					</svg>
				</a>
			</div>
			<div class="sidebar-head__bottom personal-nav-wr">
				<ul class="personal-nav-items">
					<li class="personal-nav-item" data-part="cart-items" onclick="o2.personalSidbar.select(this)">
						<a href="javascript:void(0);">Корзина</a>
					</li>
					<li class="personal-nav-item">
						<a href="personal.html">Профиль</a>
					</li>
					<li class="personal-nav-item" data-part="cart-items" onclick="o2.personalSidbar.select(this)">
						<a href="#">Контакты и доставка</a>
					</li>
					<li class="personal-nav-item" data-part="cart-items" onclick="o2.personalSidbar.select(this)">
						<a href="#">Способ оплаты</a>
					</li>
					<li class="personal-nav-item">
						<a href="#">Оформить заказ</a>
					</li>
					<li class="personal-nav-item">
						<a href="#">Заказ оформлен</a>
					</li>
				</ul>
				<a href="/logout" class="btn btn_dark-skin personal-nav-logout">Выйти</a>
			</div>
		</div>
	</div>
{% endblock %}

{% block page %}
	{% include 'blocks/breadcrumbs.twig' %}
	<div class="cart-wr" id="cart-items">
		<div class="cart">
			<h2 class="section__title cart__title">В вашей корзине <span class="_cartNum"></span><span class="_text"></span> на сумму <span class="_totalPrice"></span>₽</h2>
			<div class="cart__items">
				{% for item in cart %}
					<div class="_product cart-item" data-discount="{{item.discount}}" data-price="{{item.price}}" data-id="{{item.id}}">
						<div class="cart-item__wr">
							<div class="cart-item__main-info">
								<div class="cart-item__img">
									<picture>
										<source srcset="img/assets/{{item.img}}-phone.jpg, img/assets/{{item.img}}-phone@2x.jpg 2x" media="(max-width: 740px)">
										<source srcset="img/assets/{{item.img}}-tablet.jpg, img/assets/{{item.img}}-tablet@2x.jpg 2x" media="(max-width: 950px)">
										<source srcset="img/assets/{{item.img}}-1000.jpg, img/assets/{{item.img}}-1000@2x.jpg 2x" media="(max-width: 1200px)">
										<source srcset="img/assets/{{item.img}}.jpg, img/assets/{{item.img}}@2x.jpg 2x">
										<img src="img/assets/{{item.img}}.jpg" alt="">
									</picture>
								</div>
								<div class="cart-item__info">
									<div class="cart-item__info-name">{{item.name}}</div>
									<ul class="cart-item__info-params">
										<li class="cart-item__info-params-item">
											<span>Модель:</span>
											<span>{{item.model}}</span>
										</li>
										<li class="cart-item__info-params-item">
											<span>Габариты:</span>
											<span>{{item.size}}</span>
										</li>
										<li class="cart-item__info-params-item">
											<span>Материал:<br></span>
											<span>{{item.matherials}}</span>
										</li>
									</ul>
									<div class="cart-item__discount cart-item__discount_tablet">
										<div class="cart-item__discount-title">
											Скидка {{item.discount}}%
										</div>
										<div class="cart-item__discount-promo">
											<div>
												<span class="cart-item__discount-promo-btn" onclick="o2.personal.togglePromoInput(this)">Ввести промокод</span>
											</div>
											<input type="text" class="cart-item__discount-promo-input">
										</div>
									</div>
								</div>
							</div>
							<div class="cart-item__price _price">
								{{item.price}}<span>₽</span>
							</div>
							<div class="cart-item__discount">
								<div class="cart-item__discount-title">
									Скидка {{item.discount}}%
								</div>
								<div class="cart-item__discount-promo">
									<div>
										<button class="cart-item__discount-promo-btn" onclick="o2.personal.togglePromoInput(this)">Ввести промокод</button>
									</div>
									<input type="text" class="cart-item__discount-promo-input">
								</div>
							</div>
							<div class="cart-item__count-total">
								<div class="cart-item__count">
									<input class="_count" onchange="o2.cart.recalc(this)" value="{{item.count}}" type="tel">
								</div>
								<div class="cart-item__total-price " data-stack-price="55990">
									<span class="_stack-price">{{item.price / 100 * (100 - item.discount) * item.count}}</span><span>₽</span>
								</div>
							</div>
						</div>
						<div class="cart-item__remove">
							<a href="javascript:void(0);" onclick="o2.cart.removeFromCart(this)" class="cart-item__remove-btn">Удалить из корзины</a>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
		<div class="cart-accessories">
			<div class="section__title accessories__title">Не забудьте добавить аксессуар</div>
			{% include "blocks/accessories-and-gifts.twig" with { "classes": "_cart-acessories-slider" }%}
		</div>
		<div class="cart-disclamer">
			<div class="cart-disclamer__text">Пожалуйста, проверьте правильность заказа и выбранных параметров<br>Цена указана без учета доставки</div>
			<div class="cart-disclamer__count">Итого 4 товар на сумму</div>
			<div class="cart-disclamer__total-price"><span class="_totalPrice"></span><span>₽</span></div>
		</div>
	</div>
	<form novalidate="">
		<div class="cart-info">
			<div class="cart-info__item" id="cart-delivery">
				<div class="section__title cart-info__title">Информация о покупателе</div>
				<div class="cart-info__body">
					<label class="input-wr cart-info__input">
						<input type="text" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
						<div class="input__label">Имя*</div>
						<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
						<div class="input__sub-text input__sub-text_error"></div>
					</label>
					<label class="input-wr cart-info__input">
						<input type="text" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
						<div class="input__label">Фамилия*</div>
						<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
						<div class="input__sub-text input__sub-text_error"></div>
					</label>
					<label class="input-wr cart-info__input">
						<input type="tel" class="input _required _phone-mask" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
						<div class="input__label">Телефон*</div>
						<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
						<div class="input__sub-text input__sub-text_error"></div>
					</label>
					<label class="input-wr cart-info__input">
						<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
						<div class="input__label">E-mail*</div>
						<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
						<div class="input__sub-text input__sub-text_error"></div>
					</label>
				</div>
			</div>
			<div class="cart-info__item cart-info__item_delivery">
				<div class="section__title cart-info__title">Доставка и контакты</div>
				<div class="cart-info__body">
					<div class="cart-info__body-left">
						<div class="cart-info__delivery-type">
							<div class="cart-info__delivery-type-label">Способ доставки:</div>
							<div class="cart-info__delivery-type-items">
								<label class="_delivery cart-info__delivery-type-item cart-info__delivery-type-item_active">
									<input onchange="o2.personal.toggleDeliveryType(this)" type="radio" name="delivery" checked>
									<div class="cart-info__delivery-type-img">
										<svg role="img" class="delivery">
										  <use xlink:href="#delivery"></use>
										</svg>
									</div>
									<span class="cart-info__delivery-type-text">
										Доставка
									</span>
								</label>
								<label class="_pickup cart-info__delivery-type-item">
									<input onchange="o2.personal.toggleDeliveryType(this);" type="radio" name="delivery">
									<div class="cart-info__delivery-type-img">
										<svg role="img" class="pickup">
										  <use xlink:href="#pickup"></use>
										</svg>
									</div>
									<span class="cart-info__delivery-type-text">
										Самовывоз
									</span>
								</label>
							</div>
							<div class="cart-info__delivery-params">
								<div class="_deliveryParams cart-info__delivery-params-item">
									<label class="input-wr cart-info__input">
										<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
										<div class="input__label">Город*</div>
										<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
									</label>
									<label class="input-wr cart-info__input">
										<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
										<div class="input__label">Улица*</div>
										<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
									</label>
									<div class="cart-info__input_group">
										<label class="input-wr cart-info__input cart-info__input_small">
											<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
											<div class="input__label">Дом</div>
											<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
										</label>
										<label class="input-wr cart-info__input cart-info__input_small">
											<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
											<div class="input__label">Корпус</div>
											<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
										</label>
									</div>
									<div class="cart-info__input_group">
										<label class="input-wr cart-info__input cart-info__input_small">
											<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
											<div class="input__label">Этаж</div>
											<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
										</label>
										<label class="input-wr cart-info__input cart-info__input_small">
											<input type="email" class="input _required" value="" onkeyup="this.setAttribute('value', this.value);" onchange="this.setAttribute('value', this.value);">
											<div class="input__label">Квартира/офис</div>
											<div class="input__sub-text input__sub-text_text">Введите ваш телефон</div>
										<div class="input__sub-text input__sub-text_error"></div>
										</label>
									</div>
								</div>
								<div style="display: none;" class="_pickupParams cart-info__delivery-params-item cart-info__delivery-params-item_small">
									<div class="cart-info__delivery-params-title">
										Магазины, в которых вы можете забрать заказ
									</div>
									<div class="cart-info__shops">
										{% for item in shops %}
										    <label class="o-radio cart-info__shops-item">
												<input type="radio" class="o-radio__input" name="shops" onchange="o2.personal.togglePickupInfo(this); o2.map.setActivePlacemark('{{item.name}}', '{{item.coords}}', this)">
												<div class="o-radio__body">
													<div class="o-radio__box"></div>
													<div class="cart-info__shops-item-date">Доступно с {{item.date}}</div>
													<div class="cart-info__shops-item-name">{{item.name}}</div>
												</div>
												<div class="cart-info__shops-item-info">
													<div class="cart-info__shops-item-date cart-info__shops-item-date_inner">Доступно с {{item.date}}</div>
													М. Автозаводская, ул. Ленинская <br>
													Слобода, д. 26, ТЦ Румер<br>
													Время работы: 10.00 – 22.00<br>
													+7 (499) 406-01-98
												</div>
											</label>
										{% endfor %}
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="cart-info__body-right cart-info__body-right_hidden">
						<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=43dd238d-f61d-4f82-bf71-07fba4e77e35" type="text/javascript"></script>
						<div class="map-cart _map" id="map" data-map="large"></div>
					</div>
				</div>
			</div>
			<div class="cart-info__item cart-info__item_payment" id="cart-payment">
				<div class="section__title cart-info__title cart-info__title_mb">Способ оплаты</div>
				<div class="cart-info__body">
					<div class="cart-info__user-type">
						<label class="o-radio cart-info__user-type-item">
							<input type="radio" class="o-radio__input" name="user" checked>
							<div class="o-radio__body">
								<span class="o-radio__box"></span>
								<span class="o-radio__text">Физическое лицо</span>
							</div>
						</label>
						<label class="o-radio cart-info__user-type-item">
							<input type="radio" class="o-radio__input" name="user">
							<div class="o-radio__body">
								<span class="o-radio__box"></span>
								<span class="o-radio__text">Юридическое лицо</span>
							</div>
						</label>
					</div>
					<div class="cart-info__payment-type">
						<label class="o-radio cart-info__user-type-item">
							<input type="radio" class="o-radio__input" name="payment" checked="">
							<div class="o-radio__body">
								<span class="o-radio__box"></span>
								<span class="o-radio__text">Наличными при получении</span>
							</div>
						</label>
						<label class="o-radio cart-info__user-type-item">
							<input type="radio" class="o-radio__input" name="payment">
							<div class="o-radio__body">
								<span class="o-radio__box"></span>
								<span class="o-radio__text">Банковский перевод</span>
							</div>
						</label>
						<label class="o-radio cart-info__user-type-item">
							<input type="radio" class="o-radio__input" name="payment">
							<div class="o-radio__body">
								<span class="o-radio__box"></span>
								<span class="o-radio__text">Банковская карта</span>
							</div>
						</label>
					</div>
				</div>
			</div>
		</div>
		<div class="cart-conidence">
			<div class="cart-confidence__text">*Подтверждая заказ, вы соглашаетесь с <a href="#">политикой конфиденциальности</a></div>
			<button class="btn btn_accent cart-conidence__button">
				Подтвердить заказ
			</button>
		</div>
	</form>
	{% include "./blocks/popup-shops.twig" %}
{% endblock %}